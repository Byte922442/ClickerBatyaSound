<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>кликер sonal</title>
  <style>
    :root { --red: #ff0000; --gold: #ffcc00; --bg: #020202; --win: #0a0a0a; --border: #1a1a1a; }
    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
    body { margin: 0; height: 100vh; background: var(--bg); color: #fff; font-family: 'Consolas', monospace; overflow: hidden; display: flex; justify-content: center; align-items: center; user-select: none; }
    .main-screen { position: relative; z-index: 10; text-align: center; transition: filter 0.3s; width: 100%; }
    .blur { filter: blur(10px) brightness(0.3); pointer-events: none; }
    h1 { font-size: 80px; font-weight: 900; margin-bottom: 20px; font-style: italic; text-transform: uppercase; }
    h1 span { color: var(--red); }
    #crushBtn { padding: 30px 80px; font-size: 40px; font-weight: 900; background: linear-gradient(180deg, var(--red), #500); color: #fff; border: none; border-radius: 10px; box-shadow: 0 10px 0 #300, 0 20px 40px rgba(255,0,0,0.3); cursor: pointer; transition: 0.1s; }
    #crushBtn:active { transform: translateY(8px); box-shadow: 0 2px 0 #300; }
    .open-shop-btn { position: fixed; top: 20px; right: 20px; padding: 15px 25px; font-size: 16px; background: #111; border: 1px solid var(--border); color: var(--gold); font-weight: 900; cursor: pointer; z-index: 50; }
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; justify-content: center; align-items: center; z-index: 200; }
    .modal-overlay.active { display: flex; }
    .shop-window { width: 450px; max-width: 95%; max-height: 80vh; background: var(--win); border: 2px solid var(--border); padding: 30px; position: relative; overflow-y: auto; }
    #shop-msg { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); width: 100%; text-align: center; color: var(--red); font-weight: 900; font-size: 20px; pointer-events: none; opacity: 0; z-index: 300; }
    #shop-msg.show { opacity: 1; animation: shake-msg 0.3s infinite; }
    @keyframes shake-msg { 0%, 100% {transform: translate(-50%, -50%);} 25% {transform: translate(-52%, -48%);} 75% {transform: translate(-48%, -52%);} }
    .shop-title { color: var(--red); font-weight: 900; margin-bottom: 25px; border-bottom: 1px solid #222; padding-bottom: 10px; font-size: 18px; }
    .item-row { display: flex; justify-content: space-between; align-items: center; padding: 15px; background: #000; border: 1px solid #111; margin-bottom: 10px; }
    .item-info-title { font-size: 16px; font-weight: 900; }
    .item-info-sub { font-size: 11px; color: var(--gold); margin-top: 4px; }
    .buy-btn { padding: 8px 15px; font-size: 11px; font-weight: 900; background: #222; color: #fff; border: none; cursor: pointer; min-width: 100px; }
    .buy-btn.owned { background: #1a3a1a; color: #0f0; }
    .buy-btn.active-snd { background: var(--gold); color: #000; }
    .stats { position: fixed; top: 20px; left: 20px; z-index: 100; }
    .balance-val { font-size: 32px; font-weight: 900; }
    .income-info { font-size: 12px; color: var(--gold); margin-top: 5px; }
  </style>
</head>
<body>

<div id="shop-msg">НЕ ХВАТАЕТ БРО</div>

<div class="stats">
  <div style="color:#555; font-size:10px">ВАШ ПРОГРЕСС (СОХРАНЕНО):</div>
  <div class="balance-val" id="bal">0</div>
  <div class="income-info" id="income">ДОХОД: +10</div>
</div>

<button class="open-shop-btn" onclick="toggleShop(true)">МАРКЕТ</button>

<div class="modal-overlay" id="modal">
  <div class="shop-window">
    <div style="position:absolute; top:10px; right:15px; cursor:pointer; font-size:24px; color:#444;" onclick="toggleShop(false)">×</div>
    <div class="shop-title">АРСЕНАЛ SONAL</div>
    <div id="shop-content"></div>
  </div>
</div>

<div class="main-screen" id="main">
  <h1>УД<span>АР</span></h1>
  <button id="crushBtn">CRUSH</button>
</div>

<script>
  const balEl = document.getElementById('bal'), incomeEl = document.getElementById('income'), main = document.getElementById('main'), modal = document.getElementById('modal'), shopContent = document.getElementById('shop-content'), msg = document.getElementById('shop-msg'), btn = document.getElementById('crushBtn');

  // УРЕЗАННЫЙ ДОХОД И ЦЕНЫ
  const sounds = [
    { id: "sounds.mp3", n: "УДАР", p: 0, inc: 10 },
    { id: "sound2.mp3", n: "ГАРАЖ БАЛГАРКА", p: 500, inc: 25 },
    { id: "sound3.mp3", n: "МУСУЛЬМАНИН", p: 2000, inc: 60 },
    { id: "sound4.mp3", n: "Я ЕГО ЩАС ОТХУЯРЮ", p: 7000, inc: 150 },
    { id: "sound5.mp3", n: "С ПИСЮНОМ ПОИГРАЙ", p: 20000, inc: 400 },
    { id: "sound6.mp3", n: "ГАДАЛКА", p: 50000, inc: 1000 },
    { id: "sound7.mp3", n: "ВАДИМ ДОМОЙ", p: 120000, inc: 2500 },
    { id: "sound8.mp3", n: "ААА ЦИГАНЕ", p: 300000, inc: 6000 },
    { id: "sound9.mp3", n: "ИДИ НАХУЙ", p: 800000, inc: 15000 },
    { id: "sound10.mp3", n: "ОЙ БЛЯТЬ НЕ ХОЧЕШЬ", p: 2000000, inc: 40000 },
    { id: "sound11.mp3", n: "А ТЫ ЧЕ ВЫРЯДИЛСЯ", p: 5000000, inc: 100000 },
    { id: "sound12.mp3", n: "ПЕТРОВИЧ ГАНДОН", p: 15000000, inc: 300000 }
  ];

  // ЗАГРУЗКА СОХРАНЕНИЯ
  let savedState = JSON.parse(localStorage.getItem('sonal_save'));
  let state = savedState || { balance: 0, current: "sounds.mp3", inv: ["sounds.mp3"], currentIncome: 10 };

  function saveGame() {
    localStorage.setItem('sonal_save', JSON.stringify(state));
  }

  let currentAudio = null;

  function play() {
    if (currentAudio) { currentAudio.pause(); currentAudio.currentTime = 0; }
    currentAudio = new Audio(state.current);
    currentAudio.play().catch(() => {});
  }

  function toggleShop(open) {
    if(open) { modal.classList.add('active'); main.classList.add('blur'); renderShop(); }
    else { modal.classList.remove('active'); main.classList.remove('blur'); }
  }

  function showFail() { msg.classList.add('show'); setTimeout(() => msg.classList.remove('show'), 1500); }

  function renderShop() {
    shopContent.innerHTML = '';
    sounds.forEach(s => {
      const owned = state.inv.includes(s.id), active = state.current === s.id;
      const row = document.createElement('div');
      row.className = 'item-row';
      row.innerHTML = `
        <div>
          <div class="item-info-title">${s.n}</div>
          <div class="item-info-sub">ДОХОД: +${s.inc.toLocaleString()}</div>
        </div>
        <button class="buy-btn ${active?'active-snd':(owned?'owned':'')}" onclick="buy('${s.id}', ${s.p}, ${s.inc})">
          ${active?'АКТИВ':(owned?'ВЫБРАТЬ':s.p.toLocaleString())}
        </button>
      `;
      shopContent.appendChild(row);
    });
    balEl.innerText = state.balance.toLocaleString();
    incomeEl.innerText = `ДОХОД: +${state.currentIncome.toLocaleString()}`;
  }

  window.buy = (id, p, inc) => {
    if(state.inv.includes(id)) { state.current = id; state.currentIncome = inc; }
    else if(state.balance >= p) { state.balance -= p; state.inv.push(id); state.current = id; state.currentIncome = inc; }
    else { showFail(); }
    saveGame();
    renderShop();
  };

  btn.onclick = (e) => { 
    e.preventDefault(); 
    play(); 
    state.balance += state.currentIncome; 
    saveGame(); // Сохраняем каждый клик
    renderShop(); 
  };
  
  renderShop();
</script>
</body>
</html>