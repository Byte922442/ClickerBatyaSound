<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>–ö–õ–ò–ö! - –ü–æ–ª–Ω–∞—è –í–µ—Ä—Å–∏—è</title>
  <style>
    :root { 
      --red: #ff0000; --gold: #ffcc00; --blue: #00d4ff; 
      --glass: rgba(10, 10, 10, 0.95); --border: rgba(255, 255, 255, 0.1); 
    }
    * { box-sizing: border-box; outline: none; -webkit-tap-highlight-color: transparent; }
    html, body { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; }
    body { background-position: center !important; background-size: cover !important; color: #fff; font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; transition: background 0.8s ease; }

    /* –ë–∞–Ω-—ç–∫—Ä–∞–Ω */
    #ban-screen { position: fixed; inset: 0; z-index: 10000; display: none; background: #000 url('Gemini_Generated_Image_wzoa41wzoa41wzoa.jpg') no-repeat center; background-size: contain; flex-direction: column; justify-content: flex-end; align-items: center; }

    .main-screen { text-align: center; z-index: 10; width: 100%; }
    .blur { filter: blur(25px) brightness(0.2); pointer-events: none; }

    .stats { position: fixed; top: 20px; left: 20px; z-index: 100; padding: 15px; border-radius: 18px; background: var(--glass); border: 1px solid var(--border); }
    .shark-val { color: var(--blue); font-weight: bold; font-size: 18px; margin-top: 5px; }
    .multiplier-tag { background: var(--blue); color: #000; padding: 2px 8px; border-radius: 6px; font-size: 12px; margin-left: 5px; font-weight: 900; }

    /* –ú–∞–≥–∞–∑–∏–Ω */
    .modal-overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); backdrop-filter: blur(15px); display: none; justify-content: center; align-items: center; z-index: 200; opacity: 0; transition: 0.4s; }
    .modal-overlay.active { display: flex; opacity: 1; }
    .shop-window { width: 600px; max-width: 95%; max-height: 85vh; background: var(--glass); border: 1px solid var(--border); border-radius: 30px; padding: 25px; overflow-y: auto; transform: scale(0.9); transition: 0.4s; }
    .modal-overlay.active .shop-window { transform: scale(1); }

    .btn-ui { padding: 12px 22px; border-radius: 14px; background: var(--glass); border: 1px solid var(--border); color: white; font-weight: 900; cursor: pointer; }
    #crushBtn { padding: 45px 110px; font-size: 60px; font-weight: 900; background: linear-gradient(180deg, var(--red), #700); color: #fff; border: none; border-radius: 30px; box-shadow: 0 14px 0 #300; cursor: pointer; transition: 0.1s; font-style: italic; }
    #crushBtn:active { transform: translateY(10px); box-shadow: 0 4px 0 #300; }

    .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(145px, 1fr)); gap: 15px; }
    .item-card { background: rgba(255,255,255,0.05); border-radius: 20px; padding: 15px; text-align: center; border: 1px solid var(--border); }
    .buy-btn { width: 100%; padding: 10px; margin-top: 10px; border-radius: 10px; border: none; cursor: pointer; font-weight: bold; }
    .wp-preview { width: 100%; height: 60px; border-radius: 10px; margin-bottom: 8px; background-size: cover; background-position: center; border: 1px solid var(--border); }

    #game-container { position: fixed; inset: 0; background: #000; z-index: 500; display: none; }
  </style>
</head>
<body>

<div id="ban-screen">
    <div style="background: rgba(0,0,0,0.9); padding: 30px; width: 100%; text-align: center; color: red;">
        <h1 style="margin:0;">–¢–´ –ó–ê–ë–ê–ù–ï–ù, –ë–†–û</h1>
    </div>
</div>

<div class="stats">
  <div id="bal" style="font-size:28px; font-weight:900; color:var(--gold);">0</div>
  <div style="font-size:12px; opacity:0.8;">–î–û–•–û–î <span id="mult-view" class="multiplier-tag">x1</span></div>
  <div class="shark-val">ü¶à <span id="sharks">0</span></div>
</div>

<button class="btn-ui" style="position:fixed; top:20px; right:20px; z-index:100;" onclick="toggleShop(true)">MARKET</button>
<button class="btn-ui" style="position:fixed; bottom:20px; left:20px; z-index:100; border-color: var(--blue);" onclick="startMiniGame()">MINI GAMES</button>

<div class="modal-overlay" id="modal" onclick="if(event.target == this) toggleShop(false)">
  <div class="shop-window">
    <div style="display:flex; gap:10px; margin-bottom:20px; overflow-x: auto;">
        <button class="btn-ui" onclick="renderShop('sounds')">–ó–í–£–ö–ò</button>
        <button class="btn-ui" onclick="renderShop('wallpapers')">–û–ë–û–ò</button>
        <button class="btn-ui" style="color:var(--blue)" onclick="renderShop('buffs')">–ë–ê–§–§–´</button>
    </div>
    <div id="shop-content" class="grid"></div>
  </div>
</div>

<div id="game-container">
    <div style="position:absolute; top:20px; width:100%; text-align:center; color:var(--blue); font-size:24px; font-weight:900;">–°–ß–ï–¢: <span id="game-score">0</span></div>
    <canvas id="game-canvas"></canvas>
</div>

<div class="main-screen" id="main">
  <h1 style="font-size:120px; margin-bottom:30px; letter-spacing:-8px; font-style: italic;">–ö–õ–ò–ö!</h1>
  <button id="crushBtn">CRUSH</button>
</div>

<script>
  const FOLDERS = {
    sounds: [
      { id: "s1", n: "–£–î–ê–†", p: 0, inc: 10, f: "sounds.mp3" },
      { id: "s2", n: "–ë–ê–õ–ì–ê–†–ö–ê", p: 1000, inc: 50, f: "sound2.mp3" },
      { id: "s3", n: "–ú–£–°–õ–ò–ú", p: 5000, inc: 150, f: "sound3.mp3" },
      { id: "s4", n: "–û–¢–•–£–Ø–†–Æ", p: 15000, inc: 450, f: "sound4.mp3" },
      { id: "s5", n: "–ü–ò–°–Æ–ù", p: 50000, inc: 1200, f: "sound5.mp3" },
      { id: "s6", n: "–ì–ê–î–ê–õ–ö–ê", p: 200000, inc: 4000, f: "sound6.mp3" },
      { id: "s7", n: "–í–ê–î–ò–ú", p: 1000000, inc: 10000, f: "sound7.mp3" },
      { id: "s8", n: "–¶–ò–ì–ê–ù–ï", p: 2500000, inc: 25000, f: "sound8.mp3" },
      { id: "s9", n: "–ù–ê–•–£–ô", p: 6000000, inc: 60000, f: "sound9.mp3" },
      { id: "s10", n: "–ù–ï –•–û–ß–ï–®–¨", p: 12000000, inc: 150000, f: "sound10.mp3" },
      { id: "s11", n: "–í–´–†–Ø–î–ò–õ–°–Ø", p: 30000000, inc: 400000, f: "sound11.mp3" },
      { id: "s12", n: "–ì–ê–ù–î–û–ù", p: 100000000, inc: 1000000, f: "sound12.mp3" }
    ],
    wallpapers: [
      { id: "w1", n: "–ü–£–°–¢–û–¢–ê", p: 0, f: "" },
      { id: "w2", n: "–ë–†–ò–ì–ê–î–ê", p: 1000, f: "photo_7_2026-02-01_23-17-09.jpg" },
      { id: "w3", n: "–ë–†–ê–¢–ö–ò", p: 3000, f: "photo_14_2026-02-01_23-17-09.jpg" },
      { id: "w4", n: "–ì–†–Ø–ó–¨", p: 6000, f: "photo_13_2026-02-01_23-17-09.jpg" },
      { id: "w5", n: "–°–ü–ï–¶", p: 12000, f: "photo_12_2026-02-01_23-17-09.jpg" },
      { id: "w6", n: "–®–û–ö", p: 25000, f: "photo_11_2026-02-01_23-17-09.jpg" },
      { id: "w7", n: "–î–ï–í–£–®–ö–ê", p: 50000, f: "photo_10_2026-02-01_23-17-09.jpg" },
      { id: "w8", n: "–†–´–ë–ê–ö", p: 100000, f: "photo_9_2026-02-01_23-17-09.jpg" },
      { id: "w9", n: "–ú–ê–ô–ö–ê", p: 250000, f: "photo_8_2026-02-01_23-17-09.jpg" },
      { id: "w10", n: "–°–ü–û–†–¢", p: 500000, f: "photo_6_2026-02-01_23-17-09.jpg" },
      { id: "w11", n: "–£–®–ê–ù–ö–ê", p: 1000000, f: "photo_5_2026-02-01_23-17-09.jpg" },
      { id: "w12", n: "–°–ö–õ–ê–î", p: 2500000, f: "image_24be59.png" },
      { id: "w13", n: "–≠–õ–ò–¢–ê 1", p: 7000000, f: "photo_14_2026-02-01_23-17-09.jpg" },
      { id: "w14", n: "–≠–õ–ò–¢–ê 2", p: 15000000, f: "photo_13_2026-02-01_23-17-09.jpg" },
      { id: "w15", n: "–ë–û–°–°", p: 50000000, f: "photo_7_2026-02-01_23-17-09.jpg" }
    ],
    buffs: [
      { id: "b2", n: "BOOST x2", p: 500, mult: 2 },
      { id: "b3", n: "BOOST x3", p: 1500, mult: 3 },
      { id: "b4", n: "BOOST x4", p: 2500, mult: 4 },
      { id: "b5", n: "BOOST x5", p: 4500, mult: 5 }
    ]
  };

  let state = JSON.parse(localStorage.getItem('sonal_final_pro')) || {
    balance: 0, sharks: 0, currentSound: "s1", currentWallpaper: "w1", currentMult: 1, inv: ["s1", "w1"], income: 10
  };

  let clickTimes = [], clickAudio = null;

  function save() { localStorage.setItem('sonal_final_pro', JSON.stringify(state)); }

  function updateVisuals() {
    document.getElementById('bal').innerText = Math.floor(state.balance).toLocaleString();
    document.getElementById('sharks').innerText = state.sharks.toLocaleString();
    document.getElementById('mult-view').innerText = "x" + state.currentMult;
    const wp = FOLDERS.wallpapers.find(w => w.id === state.currentWallpaper);
    document.body.style.backgroundImage = wp && wp.f ? `linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.6)), url(${wp.f})` : "none";
  }

  function toggleShop(open) {
    const m = document.getElementById('modal');
    if(open) { m.style.display = 'flex'; setTimeout(() => m.classList.add('active'), 10); renderShop('sounds'); }
    else { m.classList.remove('active'); setTimeout(() => m.style.display = 'none', 400); }
  }

  function renderShop(tab) {
    const container = document.getElementById('shop-content');
    container.innerHTML = '';
    FOLDERS[tab].forEach(item => {
      const isBuff = tab === 'buffs';
      const owned = state.inv.includes(item.id);
      const active = isBuff ? state.currentMult === item.mult : (tab === 'sounds' ? state.currentSound === item.id : state.currentWallpaper === item.id);
      let preview = (tab === 'wallpapers' && item.f) ? `<div class="wp-preview" style="background-image:url(${item.f})"></div>` : '';
      
      const card = document.createElement('div');
      card.className = 'item-card';
      card.innerHTML = `${preview}<b>${item.n}</b><br><small>${isBuff ? 'ü¶à' : 'üí∞'}</small>
        <button class="buy-btn" style="background:${active ? 'var(--gold)' : (owned || (isBuff && state.currentMult >= item.mult) ? '#444' : 'var(--red)')}; color:${active?'#000':'#fff'}" 
                onclick="buy('${tab}','${item.id}')">
          ${active ? '–ê–ö–¢–ò–í' : ((owned || (isBuff && state.currentMult >= item.mult)) ? '–í–´–ë–†–ê–¢–¨' : item.p.toLocaleString())}
        </button>`;
      container.appendChild(card);
    });
  }

  window.buy = (tab, id) => {
    const item = FOLDERS[tab].find(x => x.id === id);
    if (tab === 'buffs') {
      if (state.sharks >= item.p) { state.sharks -= item.p; state.currentMult = item.mult; }
    } else {
      if (state.inv.includes(id)) {
        if(tab === 'sounds') { state.currentSound = id; state.income = item.inc; }
        else state.currentWallpaper = id;
      } else if (state.balance >= item.p) {
        state.balance -= item.p; state.inv.push(id);
        if(tab === 'sounds') { state.currentSound = id; state.income = item.inc; }
        else state.currentWallpaper = id;
      }
    }
    save(); updateVisuals(); renderShop(tab);
  };

  document.getElementById('crushBtn').onclick = () => {
    // –í—Ö–æ–¥ –≤ —Ñ—É–ª–ª—Å–∫—Ä–∏–Ω
    document.documentElement.requestFullscreen?.().catch(() => {});
    const now = Date.now(); clickTimes.push(now);
    clickTimes = clickTimes.filter(t => t > now - 1000);

    if (clickTimes.length > 22) {
      localStorage.clear();
      new Audio('–ß–∏—Ç—ã  –±–∞–Ω –∫–µ–º–ø–µ—Ä—Å—Ç–≤–æ  –±–∞–Ω.mp3').play();
      document.getElementById('ban-screen').style.display = 'flex';
      document.getElementById('main').style.display = 'none';
      setTimeout(() => location.reload(), 9000); return;
    }

    const sData = FOLDERS.sounds.find(s => s.id === state.currentSound);
    if (!clickAudio || clickAudio.src.indexOf(sData.f) === -1) clickAudio = new Audio(sData.f);
    clickAudio.currentTime = 0; clickAudio.play().catch(() => {});

    state.balance += (state.income * state.currentMult);
    updateVisuals(); save();
  };

  // –ú–ò–ù–ò –ò–ì–†–ê
  const canvas = document.getElementById('game-canvas'), ctx = canvas.getContext('2d');
  let gameActive = false, bird, pipes, score, frame;

  function startMiniGame() {
    document.getElementById('game-container').style.display = 'block';
    canvas.width = Math.min(450, window.innerWidth); canvas.height = window.innerHeight;
    gameActive = true; score = 0; pipes = []; frame = 0;
    bird = { x: 50, y: canvas.height/2, v: 0, g: 0.65 };
    requestAnimationFrame(gameLoop);
  }

  function gameLoop() {
    if(!gameActive) return;
    ctx.clearRect(0,0,canvas.width, canvas.height);
    bird.v += bird.g; bird.y += bird.v;
    if(frame % 90 === 0) pipes.push({ x: canvas.width, y: Math.random()*(canvas.height-350)+175, gap: 180, passed: false });
    pipes.forEach(p => {
      p.x -= 4; ctx.fillStyle = "#00d4ff";
      ctx.fillRect(p.x, 0, 60, p.y - p.gap/2); ctx.fillRect(p.x, p.y + p.gap/2, 60, canvas.height);
      if(!p.passed && p.x < bird.x) { p.passed = true; score++; state.sharks += 100; save(); updateVisuals(); document.getElementById('game-score').innerText = score; }
      if(bird.x+25 > p.x && bird.x < p.x+60 && (bird.y < p.y-p.gap/2 || bird.y+25 > p.y+p.gap/2)) gameActive = false;
    });
    ctx.fillStyle = "yellow"; ctx.fillRect(bird.x, bird.y, 25, 25);
    if(bird.y > canvas.height || bird.y < 0) gameActive = false;
    if(!gameActive) setTimeout(() => { document.getElementById('game-container').style.display = 'none'; }, 1000);
    else { frame++; requestAnimationFrame(gameLoop); }
  }

  document.getElementById('game-container').onclick = () => { if(gameActive) bird.v = -10; };
  updateVisuals();
</script>
</body>
</html>